import"./index-oHv7AdBJ.js";import{m as l}from"./module.esm-Cm4okMZt.js";const i="/todo",s=l.reactive({url:i,status:"",tags:[]});function n(t){console.log("tags","current_tags"),confirm("Are you sure you want to delete this todo?")?fetch("/todo/"+t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(e=>{e.ok?(console.log("Todo deleted successfully."),window.location.reload()):console.error("Failed to delete todo.")}).catch(e=>{alert("Error: "+e)}):console.log("Delete action canceled.")}const d=window.server.tags,a=["pending","processed","done"],r=()=>({tag_open:!1,status_open:!1,url:i,status_ids:s.status,tag_ids:s.tags,tag_selected:[],status_selected:[...window.server.filter.status],init(){d.forEach(t=>{window.server.filter.tags.includes(t.id)&&this.toggleTag(t)}),this.setUrl()},toggleTag(t){const e=this.tag_selected.findIndex(o=>o.id===t.id);e>-1?(this.tag_selected.splice(e,1),s.tags.splice(e,1)):(this.tag_selected.push(t),s.tags.push(t.id)),this.setUrl()},toggleStatus(t){const e=this.status_selected.findIndex(o=>o===t);e>-1?this.status_selected.splice(e,1):this.status_selected.push(t),this.setUrl()},setUrl(){this.url=i+"?",this.status_selected.length>0&&(this.url+="status="+this.status_selected.join(",")+"&"),this.tag_ids.length>0&&(this.url+="tags="+this.tag_ids.join(",")+"&"),this.url=this.url.slice(0,-1)}});window.filterTodo=r;window.statuses=a;window.tags=d;window.Alpine=l;window.deleteTodo=n;l.start();
